<dom-module id="asi-configurator-product-image">
    <style>
        :host {
            display:block;
        }
    </style>
    <template>
      <iron-ajax auto url="" id="ajax" handle-as="json" on-response="_onResponseReceived" last-response="{{result}}"></iron-ajax>
      <div id="product-image">
        <img src="{{product.image}}">
      </div>
    </template>
</dom-module>

<script>
    Polymer({
        is: "asi-configurator-product-image",
        created: function() {
          this.baseApiUrl = "http://localhost:3000/api/products/";
        },
        _onSkuChanged: function(e) {
          if(this.sku && this.sku.length != 0) {
              this.$.ajax.url = this.baseApiUrl + this.sku;
          }
        },
        _onResponseReceived: function(e) {
          this.product = { image: this.result.url };
        },
        properties: {
          sku: {
            type: String,
            observer: "_onSkuChanged"
          }
        }
    });
</script>
